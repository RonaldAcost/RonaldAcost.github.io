<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ruta Data Engineer • Checklist</title>
  <meta name="description" content="Checklist interactivo por semanas (30) y fases. Guarda tu progreso en localStorage, permite exportar/importar y filtrar." />
  <meta name="author" content="Ronald Acosta" />
  <meta name="color-scheme" content="light dark" />

  <!-- Bootstrap + Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <!-- Estilos compartidos -->
  <link rel="stylesheet" href="assets/style.css">
</head>
<body>
  <button id="themeToggle" class="theme-toggle" aria-label="Cambiar tema"><i class="bi bi-moon-stars"></i><span class="d-none d-sm-inline">Tema</span></button>

  <div class="wrap">
    <header class="mb-4 d-flex flex-wrap align-items-center gap-2 justify-content-between">
      <div class="d-flex align-items-center gap-3">
        <a class="btn btn-outline-light btn-sm" href="./index.html"><i class="bi bi-arrow-left"></i> Volver</a>
        <div>
          <h1 class="h3 mb-1">Ruta Data Engineer — Checklist</h1>
          <div class="text-secondary">Fases y <b>30 semanas</b>. Se guarda en <span class="pill"><i class="bi bi-hdd"></i> localStorage</span>.</div>
        </div>
      </div>
      <div class="d-flex align-items-center gap-2">
        <button id="btnExport" class="btn btn-outline-info btn-sm"><i class="bi bi-download"></i> Exportar</button>
        <label class="btn btn-outline-warning btn-sm mb-0" for="importFile"><i class="bi bi-upload"></i> Importar</label>
        <input id="importFile" type="file" accept="application/json" class="d-none" />
      </div>
    </header>

    <!-- Resumen -->
    <section class="card-glass p-3 p-md-4 mb-4">
      <div class="row g-3 align-items-center">
        <div class="col-12 col-lg-7">
          <div class="d-flex align-items-center gap-3">
            <img src="https://github.com/ronaldacost.png" width="56" height="56" class="rounded-circle border" alt="Avatar" />
            <div>
              <div class="fw-bold">Progreso general</div>
              <div class="small text-secondary"><span id="countDone">0</span>/<span id="countTotal">0</span> completados • <span id="percent">0%</span></div>
            </div>
          </div>
        </div>
        <div class="col-12 col-lg-5">
          <div class="progress" role="progressbar" aria-label="Avance"><div id="bar" class="progress-bar" style="width:0%"></div></div>
        </div>
      </div>
    </section>

    <!-- Filtros -->
    <section class="card-glass p-3 p-md-4 mb-4 toolbar">
      <div class="row g-2 g-md-3 align-items-end">
        <div class="col-12 col-md-4"><label class="form-label">Buscar</label><input id="q" type="search" class="form-control" placeholder="curso, tema, tag…" /></div>
        <div class="col-6 col-md-3"><label class="form-label">Fase</label><select id="moduleFilter" class="form-select"></select></div>
        <div class="col-6 col-md-3 d-flex gap-2"><div class="form-check mt-4"><input id="onlyPending" class="form-check-input" type="checkbox" /><label class="form-check-label" for="onlyPending">Solo pendientes</label></div></div>
        <div class="col-12 col-md-2 d-grid"><button id="resetAll" class="btn btn-outline-danger">Reiniciar</button></div>
      </div>
    </section>

    <!-- Lista -->
    <section id="list" class="card-glass p-3 p-md-4"></section>

    <!-- Añadir personalizado -->
    <section class="card-glass p-3 p-md-4 mt-4">
      <h2 class="h5 mb-3">Agregar curso / hito personalizado</h2>
      <div class="row g-2">
        <div class="col-12 col-md-6"><input id="newTitle" class="form-control" placeholder="Título (ej. Semana 31: …)" /></div>
        <div class="col-12 col-md-4"><input id="newUrl" class="form-control" placeholder="URL (opcional)" /></div>
        <div class="col-12 col-md-2"><select id="newModule" class="form-select"></select></div>
        <div class="col-12 d-grid"><button id="addItem" class="btn btn-outline-success"><i class="bi bi-plus-circle"></i> Añadir</button></div>
      </div>
    </section>

    <footer class="mt-4 text-center footer"><small>Hecho por <a href="https://github.com/ronaldacost" target="_blank" rel="noopener">@ronaldacost</a> • Guardado local, sin servidor</small></footer>
  </div>

  <!-- Script checklist -->
  <script>
  const MODULES = [
    'Fase 1: Bases sólidas',
    'Fase 2: Python aplicado a datos',
    'Fase 3: Matemáticas y análisis de datos',
    'Fase 4: SQL y bases de datos',
    'Fase 5: Cloud & Big Data',
    'Fase 6: Data Ops y orquestación'
  ];
  const BASE_ITEMS = [
  // Fase 1
  { id:'w01-linux-admin', title:'Semana 1: Curso de Introducción a la Administración de Servidores Linux', module:'Fase 1: Bases sólidas', tags:['linux','servers'] },
  { id:'w02-git-github', title:'Semana 2: Curso de Git y GitHub', module:'Fase 1: Bases sólidas', tags:['git','github'] },
  { id:'w03-se-fund', title:'Semana 3: Curso de Fundamentos de Ingeniería de Software', module:'Fase 1: Bases sólidas', tags:['software','fundamentos'] },
  { id:'w04-de-fund', title:'Semana 4: Curso de Fundamentos de Ingeniería de Datos', module:'Fase 1: Bases sólidas', tags:['data-engineering','fundamentos'] },

  // Fase 2
  { id:'w05-py-compr', title:'Semana 5: Curso de Python: Comprehensions, Funciones y Manejo de Errores', module:'Fase 2: Python aplicado a datos', tags:['python'] },
  { id:'w06-pip-venv', title:'Semana 6: Curso de Python: PIP y Entornos Virtuales', module:'Fase 2: Python aplicado a datos', tags:['python','pip','venv'] },
  { id:'w07-jupyter', title:'Semana 7: Curso de Entorno de Trabajo para Ciencia de Datos con Jupyter Notebooks y Anaconda', module:'Fase 2: Python aplicado a datos', tags:['jupyter','anaconda'] },
  { id:'w08-prof-env', title:'Semana 8: Curso de Configuración Profesional de Entorno de Trabajo para Ciencia de Datos', module:'Fase 2: Python aplicado a datos', tags:['entorno','productividad'] },
  { id:'w09-py-ds', title:'Semana 9: Curso de Python para Ciencia de Datos', module:'Fase 2: Python aplicado a datos', tags:['python','data-science'] },

  // Fase 3
  { id:'w10-math-desc', title:'Semana 10: Curso de Matemáticas para Data Science: Estadística Descriptiva', module:'Fase 3: Matemáticas y análisis de datos', tags:['matemáticas','estadística'] },
  { id:'w11-eda', title:'Semana 11: Curso de Análisis Exploratorio de Datos', module:'Fase 3: Matemáticas y análisis de datos', tags:['eda'] },
  { id:'w12-missing-detect', title:'Semana 12: Curso de Manejo de Datos Faltantes: Detección y Exploración', module:'Fase 3: Matemáticas y análisis de datos', tags:['missing-data'] },
  { id:'w13-missing-impute', title:'Semana 13: Curso de Manejo de Datos Faltantes: Imputación', module:'Fase 3: Matemáticas y análisis de datos', tags:['missing-data','imputación'] },

  // Fase 4
  { id:'w14-sql-prac', title:'Semana 14: Curso Práctico de SQL', module:'Fase 4: SQL y bases de datos', tags:['sql'] },
  { id:'w15-postgres', title:'Semana 15: Curso de PostgreSQL Aplicado a Ciencia de Datos', module:'Fase 4: SQL y bases de datos', tags:['postgres','sql'] },
  { id:'w16-nosql', title:'Semana 16: Curso de Base de Datos NoSQL', module:'Fase 4: SQL y bases de datos', tags:['nosql','db'] },

  // Fase 5
  { id:'w17-aws-fund', title:'Semana 17: Curso de Introducción a AWS: Fundamentos de Cloud Computing', module:'Fase 5: Cloud & Big Data', tags:['aws','cloud'] },
  { id:'w18-aws-core', title:'Semana 18: Curso de Introducción a AWS: Cómputo, Almacenamiento y Bases de Datos', module:'Fase 5: Cloud & Big Data', tags:['aws','compute','storage','db'] },
  { id:'w19-aws-adv', title:'Semana 19: Curso de Introducción a AWS: Redes, Gobernanza y Machine Learning', module:'Fase 5: Cloud & Big Data', tags:['aws','networking','ml'] },
  { id:'w20-aws-ec2', title:'Semana 20: Curso Práctico de AWS: Cómputo con EC2', module:'Fase 5: Cloud & Big Data', tags:['aws','ec2'] },
  { id:'w21-aws-storage', title:'Semana 21: Curso Práctico de Storage en AWS', module:'Fase 5: Cloud & Big Data', tags:['aws','s3','storage'] },
  { id:'w22-aws-db', title:'Semana 22: Curso Práctico de Bases de Datos en AWS', module:'Fase 5: Cloud & Big Data', tags:['aws','rds','dynamodb'] },
  { id:'w23-aws-bigdata', title:'Semana 23: Curso de Big Data en AWS', module:'Fase 5: Cloud & Big Data', tags:['aws','big-data'] },
  { id:'w24-aws-redshift', title:'Semana 24: Curso de AWS Redshift para Manejo de Big Data', module:'Fase 5: Cloud & Big Data', tags:['aws','redshift'] },
  { id:'w25-aws-iam', title:'Semana 25: Curso Práctico de AWS: Roles y Seguridad con IAM', module:'Fase 5: Cloud & Big Data', tags:['aws','iam','security'] },

  // Fase 6
  { id:'w26-dwh-lakes', title:'Semana 26: Curso de Data Warehousing y Data Lakes', module:'Fase 6: Data Ops y orquestación', tags:['dwh','datalake'] },
  { id:'w27-databricks', title:'Semana 27: Curso de Databricks: Arquitectura Delta Lake', module:'Fase 6: Data Ops y orquestación', tags:['databricks','delta-lake'] },
  { id:'w28-airflow', title:'Semana 28: Curso de Fundamentos de Apache Airflow', module:'Fase 6: Data Ops y orquestación', tags:['airflow','orchestración'] },
  { id:'w29-bash', title:'Semana 29: Curso de Programación en Bash Shell', module:'Fase 6: Data Ops y orquestación', tags:['bash','shell'] },
  { id:'w30-docker', title:'Semana 30: Curso de Docker: Fundamentos', module:'Fase 6: Data Ops y orquestación', tags:['docker'] },
  ];
  const KEY='rex-platzi-de-checklist-v2';
  const state={checks:{}, items:[...BASE_ITEMS]};
  const $=(s,r=document)=>r.querySelector(s);

  // Tema persistente
  (function(){
    const root=document.documentElement; const k='pref-theme';
    const stored=localStorage.getItem(k);
    const prefersDark=window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    const initial = stored || (prefersDark ? 'dark' : 'light');
    root.setAttribute('data-theme', initial);
    if(!stored) localStorage.setItem(k, initial);
    const btn=document.getElementById('themeToggle');
    const updateIcon=()=>{ const mode=root.getAttribute('data-theme'); const ic=btn.querySelector('i'); if(ic) ic.className = (mode==='dark')? 'bi bi-moon-stars' : 'bi bi-sun'; };
    updateIcon();
    btn.addEventListener('click', ()=>{ const next = root.getAttribute('data-theme')==='dark' ? 'light':'dark'; root.setAttribute('data-theme', next); localStorage.setItem(k, next); updateIcon(); });
  })();

  function load(){ try{ const raw=localStorage.getItem(KEY); if(!raw) return; const saved=JSON.parse(raw); if(saved.checks) state.checks=saved.checks; if(saved.items && Array.isArray(saved.items)){ const map=new Map(BASE_ITEMS.map(it=>[it.id,it])); for(const it of saved.items){ map.set(it.id,it);} state.items=[...map.values()]; } }catch(e){} }
  function save(){ localStorage.setItem(KEY, JSON.stringify({checks:state.checks, items:state.items})); }
  function slugify(s){ return s.toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g,'').replace(/[^a-z0-9]+/g,'-').replace(/(^-|-$)/g,''); }

  function renderFilters(){ document.querySelector('#moduleFilter').innerHTML='<option value="">Todas las fases</option>'+MODULES.map(m=>`<option value="${m}">${m}</option>`).join(''); document.querySelector('#newModule').innerHTML=MODULES.map(m=>`<option value="${m}">${m}</option>`).join(''); }

  function renderProgress(){ const t=state.items.length, d=state.items.filter(it=> (state.checks[it.id]||it.done) ).length, p=t?Math.round(d/t*100):0; document.querySelector('#countTotal').textContent=t; document.querySelector('#countDone').textContent=d; document.querySelector('#percent').textContent=p+'%'; document.querySelector('#bar').style.width=p+'%'; }

  function renderList(){ const q=document.querySelector('#q').value.trim().toLowerCase(); const mod=document.querySelector('#moduleFilter').value; const only=document.querySelector('#onlyPending').checked; const container=document.querySelector('#list'); container.innerHTML='';
    const groups=new Map();
    for(const it of state.items){ if(mod && it.module!==mod) continue; if(q && !(it.title.toLowerCase().includes(q) || (it.tags||[]).some(t=>t.toLowerCase().includes(q)))) continue; const done=(state.checks.hasOwnProperty(it.id)?!!state.checks[it.id]:!!it.done); if(only && done) continue; if(!groups.has(it.module)) groups.set(it.module, []); groups.get(it.module).push(it); }
    for(const [module, items] of groups){ const section=document.createElement('div'); section.className='mb-4'; section.innerHTML=`<h2 class="h5 mb-3 section-title">${module}</h2>`; for(const it of items){ const done=(state.checks.hasOwnProperty(it.id)?!!state.checks[it.id]:!!it.done); const row=document.createElement('div'); row.className='item-row'; row.innerHTML=`<input type=\"checkbox\" ${done?'checked':''} data-id=\"${it.id}\"><div class=\"flex-grow-1\"><div class=\"item-title\">${it.title} ${it.url? `<a class=\"ms-1\" href=\"${it.url}\" target=\"_blank\" rel=\"noopener\"><i class=\"bi bi-box-arrow-up-right\"></i></a>`:''}</div><div class=\"item-meta\">${module} ${it.tags?.length?'• '+it.tags.join(', '):''}</div></div>`; section.appendChild(row);} container.appendChild(section);} renderProgress(); }

  function onListClick(e){ const cb=e.target.closest('input[type=\"checkbox\"][data-id]'); if(!cb) return; const id=cb.getAttribute('data-id'); state.checks[id]=cb.checked; save(); renderProgress(); }

  function addCustom(){ const title=document.querySelector('#newTitle').value.trim(), url=document.querySelector('#newUrl').value.trim(), module=document.querySelector('#newModule').value||MODULES[0]; if(!title) return alert('Escribe un título'); const id=slugify(title); if(state.items.some(i=>i.id===id)) return alert('Ya existe un ítem con ese título (id)'); state.items.push({id,title,url,module,tags:[]}); save(); document.querySelector('#newTitle').value=''; document.querySelector('#newUrl').value=''; renderList(); }

  function resetAll(){ if(!confirm('¿Seguro que quieres reiniciar todo tu progreso?')) return; state.checks={}; for(const it of state.items){ if(it.done) it.done=false; } save(); renderList(); }

  function exportData(){ const data=JSON.stringify({checks:state.checks, items:state.items},null,2); const blob=new Blob([data],{type:'application/json'}); const url=URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='platzi-de-checklist.json'; a.click(); URL.revokeObjectURL(url); }

  function importData(file){ const reader=new FileReader(); reader.onload=()=>{ try{ const data=JSON.parse(reader.result); if(Array.isArray(data.items)) state.items=data.items; if(data.checks) state.checks=data.checks; save(); renderList(); }catch(e){ alert('Archivo inválido'); } }; reader.readAsText(file); }

  function init(){ load(); renderFilters(); renderList();
    document.querySelector('#q').addEventListener('input', renderList);
    document.querySelector('#moduleFilter').addEventListener('change', renderList);
    document.querySelector('#onlyPending').addEventListener('change', renderList);
    document.querySelector('#list').addEventListener('click', onListClick);
    document.querySelector('#addItem').addEventListener('click', addCustom);
    document.querySelector('#resetAll').addEventListener('click', resetAll);
    document.querySelector('#btnExport').addEventListener('click', exportData);
    document.querySelector('#importFile').addEventListener('change', (e)=>{ if(e.target.files && e.target.files[0]) importData(e.target.files[0]); e.target.value=''; });
    const params=new URLSearchParams(location.search); const m=params.get('m'); if(m && MODULES.includes(m)){ document.querySelector('#moduleFilter').value=m; renderList(); }
  }
  init();
  </script>
</body>
</html>
